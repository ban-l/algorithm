# 二叉堆

## 定义

二叉堆逻辑结构是完全二叉树，存储结构一般为数组。

特性

- 对于编号为 i 的结点
  - 若有双亲，双亲为 双亲为 ⌊i/2⌋
  - 若有左孩子，左孩子为 2i
  - 若有右孩子，右孩子为 2i+1
- 大根堆：根结点最大

$$
L(i) >=  L(2i),  L(i) >= L(2i+1)
$$

- 小根堆：根结点最小

$$
L(i) <=  L(2i),  L(i) <= L(2i+1)
$$

- 应用：堆排序、优先级队列

  

![image-20250911213645616](image-20250911213645616.png)



大根堆的逻辑结构映射到数组

![image-20250911214053556](image-20250911214053556.png)

## 操作示例（大根堆）

### 初始化堆

1. 先对**分支结点**( i ≤⌊n/2⌋)，对第⌊n/2⌋个分支结点开始判断，使该子树成为堆

2) 然后向前依次对各结点(⌊n/2⌋-1, 1)为根的子树进行判断
3) 若结点值 `L(i) <=  L(2i)`或者 `L(i) <= L(2i+1)`，交换节点
4) 交换后可能破坏下一级的堆，继续采用上述方法构造下一级的堆，直至以该结点为根的子树构成堆为止
5) 反复使用上述方法建堆，直至根结点

### 调整

- 插入(上浮)：插入元素放在堆底，调整，上浮
- 删除(下沉)：堆顶元素和堆底最后的元素对调，然后删除堆顶元素，调整，下沉
- 插入、删除，堆都发生改变，需要调整
- 反复调整**分支结点** i，使每一个以 i 为根的子树都构成堆
