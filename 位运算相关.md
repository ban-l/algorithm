# 位运算

## 转换大小写字母

1. 利用或操作 `|` 和空格将英文字符转换为小写

```java
char a1 = 'a' | ' ';
char a2 = 'A' | ' ';
System.out.println(a1 + " " + a2);
```

2. 利用与操作 `&` 和下划线将英文字符转换为大写

```java
char b1 = 'b' & '_';
char b2 = 'B' & '_';
System.out.println(b1 + " " + b2);
```

3. 利用异或操作 `^` 和空格进行英文字符大小写互换

```java
char c1 = 'd' ^ ' ';
char c2 = 'D' ^ ' ';
System.out.println(c1 + " " + c2);
```

4. 利用异或操作 `^` 判断两个数是否异号

```java
int x1 = -1, y1 = 2;
boolean f1 = ((x1 ^ y1) < 0); // true
System.out.println(f1);

int x2 = 3, y2 = 2;
boolean f2 = ((x2 ^ y2) < 0); // false
System.out.println(f2);
```

## index & (arr.length - 1) 的运用

前提：数组长度是 2 的幂次方

使用位运算 `&` 代替 取模 `%`

示例：在环形数组中转圈

```java
while (true) {
    // 在环形数组中转圈
    System.out.println(arr[index & (arr.length - 1)]);
    index++;
}
// 输出：1,2,3,4,1,2,3,4,1,2,3,4...
```

## n & (n-1) 的运用

作用：消除数字 n 的二进制表示中的最后一个 1

### 例题1：位1的个数

编写一个函数，输入是一个无符号整数（以二进制串的形式），返回其二进制表达式中数字位数为 '1' 的个数（也被称为汉明重量）。

```java
int n = 5;
int count = 0;
while (n != 0) {
    count++;
    n = n & (n - 1);
}
System.out.println(count); // 2
```

## 例题2： 2 的幂

给你一个整数 n，请你判断该整数是否是 2 的幂次方。如果是，返回 true ；否则，返回 false 。

如果存在一个整数 x 使得 n == 2^x ，则认为 n 是 2 的幂次方。

```java
int n = 8;
// 2的幂次方都大于0
if (n <= 0) return;
// 只有一个1，消去后看是否为0
boolean res = (n & n - 1) == 0;
System.out.println(res); // true
```