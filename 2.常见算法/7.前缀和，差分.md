# 前缀和，差分

## 前缀和

- l 和 r 为 序号， l 到 r 区间的和：`sum[r] - sum[l-1]`，[]中值为序号
- l 和 r 为 下标， l 到 r 区间的和：`sum[r+1] - sum[l]`，[]中值为序号

示例：

1. 数组为 nums = [1, 2, 3, 4, 5]
2. 前缀和为 sum = [1, 3, 6, 10, 15]
3. 序号 2 到 4 区间的和：sum[4] - sum[2-1] = 10 - 1 = 9
4. 下表 1 到 3 区间的和：sum[3+1] - sum[1] = 10 - 1 = 9

## 差分

差分解决的问题

- 存在一个序列，对序列某些不确定的区间多次进行加/减操作时，即序列某一特定范围内的所有值都加/减一个常数；
- 如果每次都是对这些区间遍历操作，假设进行n次操作，每次对长度为m的数组进行操作，时间复杂度为O(nm)；
- 如果使用差分来解决，可以将时间复杂度变为O(n)。

## 前缀和 与 差分

**差分可以简单的看成序列中每个元素与其前一个元素的差。**

**原序列为差分序列的前缀和**。

注意：差分只能够解决加减的问题，不能够解决乘除的问题。

## 区间加

区间 `[l,r]` 中的所有值都加上常数`c`

- `b[l] += c;`
- `b[r+1] -= c;`

## 区间减

区间`[l,r]`中的所有值都减去常数`c`

- `b[l] -= c;`
- `b[r+1] += c;`

## 差分解题步骤

1. 构造差分数组
2. 进行相应的加减操作
3. 差分还原（前缀和）