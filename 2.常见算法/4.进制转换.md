# 进制转换

## 10进制转其它进制（短除法）

循环取模、除以：

- 10转16进制，循环取模16、除以16
- 10转2进制，循环取模2、除以2

## 其它进制转10进制（分割法）

分割各个位的数字，依次乘：

- 16转10进制，分割，依次乘以16，从最大位数开始
- 2转10进制，分割，依次乘以2，从最大位数开始

## 一 2进制转10进制

## 二 10进制转2进制

### 1.短除法

短除法，十进制转二进制，循环取模，除2

```java
int n = 12;
List<Integer> list = new ArrayList<>();
while (n != 0) {
    int temp = n % 2;
    list.add(temp);
    n /= 2;
}
Collections.reverse(list);
list.forEach(System.out::print); // 1100
```

### 2.掩码

掩码，是一串二进制代码对目标字段进行**位与运算**，屏蔽当前的输入位，得到二进制各个位。

示例：十进制：12，转换为二进制位：1100

1. 掩码公式：`(n & 1 << i) >> i`
2. i = 0，(1100 & 0001 = 0000) >> 0 = 0000 = 0，记录：0
3. i = 1，(1100 & 0010 = 0000) >> 1 = 0000 = 0，记录：00
4. i = 2，(1100 & 0100 = 0100) >> 2 = 0001 = 1，记录：001
5. i = 3，(1100 & 1000 = 1000) >> 3 = 0001 = 1，记录：0011

反转0011，得到二机制结果：1100

代码如下：

```java
int n = 25;
List<Integer> list = new ArrayList<>();
for (int i = 0; i < 8; i++) {
    // 左位移，右位移，得到二进制各个位
    int temp = (n & 1 << i) >> i;
    list.add(temp);
}
Collections.reverse(list); // 1011000，需要反转为正确的顺序
list.forEach(System.out::print); // 00011001

```

### 3.n&(n-1)消去二进制最后一个1

```java
int n = 15; // 0b1111
int count = 0;
while (n != 0) {
    n = n & (n - 1);
    count++;
}
System.out.println(count); // 4
```

## 三 16进制转10进制

注意：字符A,B,C,D,E,F的处理，需要转成数字10,11,12,13,14,15

```java
public int conversion16To10(String n) {
    int sum = 0;
    for (int i = 0; i < n.length(); i++) {
        if (n.charAt(i) >= 'A') {
            sum = sum * 16 + n.charAt(i) - 'A' + 10;
        } else {
            sum = sum * 16 + n.charAt(i) - '0';
        }
    }
    return sum;
}
```

## 四 10进制转为16进制

注意：数字10,11,12,13,14,15的处理，需要转成字符A,B,C,D,E,F

```java
public String conversion10To16(int n) {
    StringBuilder sb = new StringBuilder();
    while (n != 0) {
        if (n % 16 >= 10) {
            sb.append((char) ('A' + n % 16 - 10));
        } else {
            sb.append((char) ('0' + n % 16));
        }
        n /= 16;
    }
    return sb.reverse().toString();
```

